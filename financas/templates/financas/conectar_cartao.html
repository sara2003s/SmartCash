{% extends "financas/base.html" %}

{% load static %}

{% block title %}Nova Conexão{% endblock %}
{% if sem_header %}
{% block header_nav %}{% endblock %}
{% endif %}

{% block content %}
<script src="https://unpkg.com/lucide@latest"></script>

<div class="container py-4 px-4">
    <div class="flex items-center gap-4 mb-6">
        <a href="{% url 'financas:nova_conexao' %}" class="text-gray-600 font-medium flex items-center gap-2">
            <i data-lucide="arrow-left" class="w-6 h-6"></i>
        </a>
        <h1 class="text-3xl font-bold text-gray-800 ">
            Conectar Cartão de Crédito
        </h1>
    </div>
</div>
<div class="grid grid-cols-1 w-full mx-auto">
    <div class="bg-white p-8 rounded-lg shadow-lg w-full">
        <div class="flex items-center gap-4 mb-4">
            <i data-lucide="credit-card" class="text-purple-600 w-10 h-10"></i>
            <div>
                <h1 class="text-xl font-bold text-gray-800">Informações do Cartão</h1>
                <p class="text-sm text-gray-600">Preencha os dados para estabelecer a conexão segura</p>
            </div>
        </div>

        <form action="{% url 'financas:conectar_cartao' %}" method="post">
            {% csrf_token %}
                 <div class="mb-6">
                    <label for="tipo_cartao" class="block text-sm font-medium text-gray-700 mb-1">Tipo de Cartão</label>
                    <select id="tipo_cartao" name="tipo" class="w-full rounded-md border border-gray-300 px-3 py-2">
                        <option value="">Selecione o tipo</option>
                        <option value="Visa">Visa</option>
                        <option value="Mastercard">Mastercard</option>
                        <option value="Elo">Elo</option>
                    </select>
                </div>
            <div class="mb-6">
                <div>
                    <label for="nome_cartao" class="block text-sm font-medium text-gray-700 mb-1">Nome no Cartão</label>
                    <input type="text" id="nome_cartao" name="nome_cartao"
                        placeholder="Nome conforme expresso no cartão"
                        class="w-full rounded-md border border-gray-300 px-3 py-2">
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div>
                    <label for="numero_cartao" class="block text-sm font-medium text-gray-700 mb-1">Número do
                        Cartão</label>
                    <input type="text" id="numero_cartao" name="numero_cartao" placeholder="**** **** **** 0000"
                        class="w-full rounded-md border border-gray-300 px-3 py-2">
                </div>
                <div>
                    <label for="validade" class="block text-sm font-medium text-gray-700 mb-1">
                        Validade</label>
                    <input type="text" id="validade" name="validade" placeholder="MM/AA"
                        class="w-full rounded-md border border-gray-300 px-3 py-2">
                </div>
            </div>

            <div class="flex justify-end gap-2 mt-8">
                <a href="{% url 'financas:nova_conexao' %}"
                    class="px-6 py-2 border border-gray-300 rounded-md font-semibold text-gray-700 hover:bg-gray-100 transition-colors">
                    Cancelar
                </a>
                <button type="submit"
                    class="px-6 py-2 rounded-md bg-[#282e3f] text-white font-semibold hover:bg-[#404965] transition-colors">
                    Conectar
                </button>
            </div>
        </form>
    </div>
    {% if messages %}
    <div id="message-container" class="fixed bottom-4 right-4 z-50 flex flex-col space-y-2 max-w-sm">
        {% for message in messages %}
        <div
            class="px-6 py-4 rounded-lg shadow-lg text-white font-semibold transition-all duration-300
        {% if 'error' in message.tags %}bg-red-600{% elif 'success' in message.tags %}bg-green-600{% else %}bg-gray-600{% endif %}">
            <p>{{ message }}</p>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</div>



<script>
    // Ativa os ícones do Lucide
    lucide.createIcons();
    document.addEventListener("DOMContentLoaded", function () {
        const messageContainer = document.getElementById('message-container');
        if (messageContainer) {
            setTimeout(() => {
                messageContainer.style.display = 'none';
            }, 5000); // 5000 milissegundos = 5 segundos
        }
    });
</script>

{% endblock %}