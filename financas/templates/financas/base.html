{% load static %}
<script src="https://unpkg.com/lucide@latest"></script>

<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}SmartCash{% endblock %}</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-[#f9fafb] text-gray-900 flex">

  <aside class="fixed w-64 bg-[#f9fafb] shadow-md p-4 min-h-screen ">
    <!-- Card do usuário -->
    <div class="bg-white-50 p-4 rounded-xl shadow mb-6">
  
      <h3 class="font-semibold text-gray-800">{{ request.user.first_name }} {{ request.user.last_name }}</h3>
      <p class="text-sm text-gray-500">{{ request.user.email }}</p>
      {% if request.user.profile.plano == 'premium' %}
      <span
        class="mt-2 inline-flex items-center gap-2 px-3 py-1 text-xs font-semibold text-purple-700 bg-purple-100 rounded-full">
        <i data-lucide="crown" class="w-3 h-3"></i>
        Premium
      </span>
      {% elif request.user.profile.plano == 'pro' %}
      <span
        class="mt-2 inline-flex items-center gap-2 px-3 py-1 text-xs font-semibold text-blue-700 bg-blue-100 rounded-full">
        <i data-lucide="star" class="w-3 h-3"></i>
        Pro
      </span>
      {% else %} <span
        class="mt-2 inline-flex items-center gap-2 px-3 py-1 text-xs font-semibold text-gray-700 bg-gray-100 rounded-full">
        <i data-lucide="zap" class="w-3 h-3"></i>
        Freemium
      </span>
      {% endif %}
      </div>

    <!-- Menu -->
    <h4 class="uppercase text-xs font-semibold text-black-400 mb-2">Menu</h4>
    <nav class="flex flex-col gap-2">
      <a href="{% url 'dashboard' %}" class="flex items-center gap-2 p-2 rounded hover:bg-gray-100">
        <span>
          <i data-lucide="layout-dashboard" class="w-4 h-4"></i>
        </span> Dashboard
      </a>
      <a href=" {% url 'financas:metas' %}" class="flex items-center gap-2 p-2 rounded hover:bg-gray-100">
        <span>
          <i data-lucide="target" class="w-4 h-4"></i>
        </span> Metas
      </a>
      <a href="{% url 'financas:transacoes' %}" class="flex items-center gap-2 p-2 rounded hover:bg-gray-100">
        <span>
          <i data-lucide="receipt" class="w-4 h-4"></i>
        </span> Transações
      </a>
      <a href="{% url 'financas:conexoes_bancarias' %}" class="flex items-center gap-2 p-2 rounded hover:bg-gray-100">
        <span>
          <i data-lucide="upload" class="w-4 h-4"></i>
        </span> Conexões Bancárias
      </a>
      <a href="{% url 'financas:educacao_2' %}" class="flex items-center gap-2 p-2 rounded hover:bg-gray-100">
        <span>
          <i data-lucide="book-open" class="w-4 h-4"></i>
        </span> Educação
      </a>
      <a href="{% url 'financas:configuracoes' %}" class="flex items-center gap-2 p-2 rounded hover:bg-gray-100">
        <span>
          <i data-lucide="settings" class="w-4 h-4"></i>
        </span> Configurações
      </a>
    </nav>
    <!-- Parte de baixo: Linha separadora + Botão sair -->
    <div class="p-4 ">
      <hr class="border-t border-gray-200 mb-4">
      <a href="{% url 'logout' %}"
        class="w-full block text-center bg-[#272e3f] hover:bg-[#3f4c6b] text-white py-2 px-3 rounded">
        Sair
      </a>
    </div>
  </aside>
  <div class="flex-1 flex flex-col min-h-screen">
    {# Header só aparece se NÃO tiver sem_header=True #}
    {% if not sem_header %}
    {% block header_nav %}
    <header class="bg-white shadow p-4 border-b flex items-center sticky top-0 z-50 ml-64">
      <h1 class="text-xl font-bold">Dashboard</h1>
      <div class="flex gap-4 items-center ml-auto">
        <button
          class="bg-white border border-blue-500 text-blue-600 px-3 py-1 rounded-full font-medium hover:bg-blue-50 transition">
          Plano Premium
        </button>
        <button onclick="abrirModal()" class="bg-blue-600 text-white px-3 py-1 rounded">
          Importar Extrato
        </button>
      </div>
    </header>
    {% endblock %}
    {% endif %}
    <main class="ml-64 p-6">
      {% block content %}
      {% endblock %}
    </main>
  </div>
</body>
<!-- Modal Importar Extrato -->
<div id="modalExtrato" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
  <div class="bg-white rounded-xl shadow-lg w-full max-w-lg p-6 relative">

    <!-- Botão Fechar -->
    <button onclick="fecharModal()" class="absolute top-3 right-3 text-gray-400 hover:text-gray-600">
      <img src="/static/img/x.png" alt="Upload" class="w-6 h-6">
    </button>

    <!-- Conteúdo do Modal -->
    <h2 class="text-xl font-medium flex items-center gap-2 mb-2">
      <img src="/static/img/upload (1).png" alt="Upload" class="w-6 h-6">
      Upload de Extrato Bancário
    </h2>
    <p class="text-gray-600 text-sm mb-4">
      Envie seu extrato em formato CSV, OFX ou XLSX para análise automática
    </p>

    <!-- Caixa de Upload -->
    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
      <div class="flex justify-center items-center h-20">
        <img src="/static/img/upload (1).png" alt="Upload" class="w-12 h-12">
      </div>
      <p class="font-semibold text-[#4f5866] mb-2">Arraste seu arquivo aqui</p>
      <p class="text-[#4f5866] text-sm mb-6">ou clique para selecionar</p>

      <label class="cursor-pointer bg-white border border-gray-200 text-black px-4 py-2 rounded-lg hover:bg-[#eff6ff]">
        Selecionar Arquivo
        <input type="file" class="hidden" accept=".csv,.ofx,.xlsx" />
      </label>

      <p class="text-xs text-gray-400 mt-6">Formatos aceitos: CSV, XLSX, OFX (máx. 10MB)</p>
    </div>

    <!-- Instruções -->
    <div class="bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6 text-sm">
      <p class="font-semibold text-[#1e3a8a]"> Como obter seu extrato:</p>
      <ul class="list-disc list-inside text-[#1e3a8a] mt-2">
        <li>Acesse o app ou site do seu banco</li>
        <li>Vá em "Extratos" ou "Movimentação"</li>
        <li>Selecione o período desejado</li>
        <li>Exporte em formato CSV, OFX ou XLSX</li>
      </ul>
    </div>
    <!-- Segurança -->
    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4 mt-4 text-sm">
      <div class="flex items-center gap-1 font-semibold text-gray-700">
        <img src="{% static 'img/info.png' %}" alt="informações" class="w-4 h-4">
        Segurança dos seus dados
      </div>
      <p class="text-gray-500 mt-1">
        Seus extratos são processados localmente e criptografados.
        Não armazenamos informações sensíveis como números de conta.
      </p>
    </div>

  </div>
</div>

</html>
<script>
  // Ativa os ícones do Lucide
  lucide.createIcons();

  function abrirModal() {
    document.getElementById('modalExtrato').classList.remove('hidden');
  }
  function fecharModal() {
    document.getElementById('modalExtrato').classList.add('hidden');
  }

</script>